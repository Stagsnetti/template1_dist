import{r as a,R as y}from"../template1.js";function T(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function I(){return I=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},I.apply(this,arguments)}function K(e,r){if(e==null)return{};var t={},o=Object.keys(e),i,n;for(n=0;n<o.length;n++)i=o[n],!(r.indexOf(i)>=0)&&(t[i]=e[i]);return t}var Q="ðŸ’¡react-cool-img: the browser doesn't support Intersection Observer, please install polyfill to enable lazy loading: https://github.com/wellyshen/react-cool-img#intersection-observer-polyfill",V="ðŸ’¡react-cool-img: the threshold of observerOptions must be a number. Use 0 as fallback.",q=function(e,r){var t=r.root,o=r.rootMargin,i=o===void 0?"50px":o,n=r.threshold,h=n===void 0?.01:n,f=a.useState(!1),d=f[0],s=f[1],g=a.useState(null),m=g[0],p=g[1],c=a.useRef(null),u=a.useRef(null),b=a.useRef(!1),l=h;typeof h!="number"&&(console.warn(V),l=0);var v=a.useCallback(function(){u.current&&(clearTimeout(u.current),u.current=null)},[]);return a.useEffect(function(){if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window))return b.current||(console.error(Q),b.current=!0),s(!0),function(){return null};c.current=new IntersectionObserver(function(E){var S=E[0],R=S.isIntersecting,w=S.intersectionRatio,$=R!==void 0?R:w>0;$&&!d?u.current=setTimeout(function(){s(!0)},e):v()},{root:t,rootMargin:i,threshold:l});var O=c.current;return m&&O.observe(m),function(){O.disconnect(),v()}},[m,d,t,i,l,e,v]),[p,d]},x="REACT_COOL_IMG",X=function(r){try{var t=JSON.parse(sessionStorage.getItem(x)||"{}");t[r]=new Date,sessionStorage.setItem(x,JSON.stringify(t))}catch(o){console.error("ðŸ’¡ react-cool-img: "+o)}},Y=function(r){try{var t=JSON.parse(sessionStorage.getItem(x)||"{}");return!!t[r]}catch(o){return console.error("ðŸ’¡ react-cool-img: "+o),!1}},Z=function(){function e(){T(this,"img",null),T(this,"timeout",null),T(this,"retries",1)}var r=e.prototype;return r.load=function(o,i,n,h,f,d){var s=this,g=n.count,m=g===void 0?3:g,p=n.delay,c=p===void 0?2:p,u=n.acc,b=u===void 0?"*":u;this.img=new Image,this.img.src=o,d&&(this.img.crossOrigin=d),i&&this.img.decode&&this.img.decode().catch(function(){}),this.img.onerror=function(l){if(!m||s.retries>m){h(l);return}var v=b==="*"?Math.pow(c,s.retries):c*s.retries;v=b===!1?c:v,s.timeout=setTimeout(function(){s.clearImgSrc(),s.img.src=o},v*1e3),s.retries+=1},this.img.onload=function(l){return f(l)}},r.unload=function(){this.img&&(this.img.onerror=null,this.img.onload=null,this.clearImgSrc(),this.img=null),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.retries=1},r.clearImgSrc=function(){this.img.src="";try{delete this.img.src}catch{}},e}(),F=function(e){var r=a.useRef(e);return r.current=e,r},ee=["className","placeholder","src","error","crossOrigin","decode","lazy","cache","debounce","observerOptions","retry","srcSet","sizes","onError","onLoad"],G="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",re=a.forwardRef(function(e,r){var t=e.className,o=t===void 0?"":t,i=e.placeholder,n=e.src,h=e.error,f=e.crossOrigin,d=e.decode,s=d===void 0?!0:d,g=e.lazy,m=g===void 0?!0:g,p=e.cache,c=p===void 0?!0:p,u=e.debounce,b=u===void 0?300:u,l=e.observerOptions,v=l===void 0?{}:l,O=e.retry,E=O===void 0?{}:O,S=e.srcSet,R=e.sizes,w=e.onError,$=e.onLoad,_=K(e,ee),M=q(b,v),U=M[0],P=M[1],j=a.useState(i||G),B=j[0],L=j[1],W=a.useRef(new Z),z=F(w),D=F($),N=B===n,J=n?n.replace(/^.*[\\/]/,"").split(".")[0]:"",k=function(A){A&&(U(A),r&&(r.current=A))};return a.useEffect(function(){if(!n)return L(i||G),function(){return null};var C=W.current;return(!m||c&&Y(n)||P)&&C.load(n,s,E,function(A){L(function(H){return h||i||H}),z.current&&z.current(A)},function(A){L(n),c&&X(n),D.current&&D.current(A)},f),function(){return C.unload()}},[c,f,s,h,m,z,D,i,n,P]),y.createElement(y.Fragment,null,y.createElement("img",I({className:o+" no-js-"+J,src:B,crossOrigin:N?f:void 0,srcSet:N?S:void 0,sizes:N?R:void 0},_,{ref:k})),y.createElement("noscript",null,y.createElement("style",null,".no-js-"+J+" { display: none !important; }"),y.createElement("img",I({className:o,src:n,crossOrigin:f,srcSet:S,sizes:R},_))))}),ne=a.memo(re);export{ne as i};
